(function(e){function t(t){for(var i,l,s=t[0],o=t[1],c=t[2],u=0,m=[];u<s.length;u++)l=s[u],n[l]&&m.push(n[l][0]),n[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,l=1;l<a.length;l++){var o=a[l];0!==n[o]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},r=[];function l(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"df94bfef"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,i){a=n[e]=[t,i]});t.push(a[2]=i);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=l(e),r=function(t){o.onerror=o.onload=null,clearTimeout(c);var a=n[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,l=new Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");l.type=i,l.request=r,a[1](l)}n[e]=void 0}};var c=setTimeout(function(){r({type:"timeout",target:o})},12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"3dfd":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase title_bar"},[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{medium:""}},[e._v("fab fa-instagram")])],1),a("span",[e._v("IG藏寶庫")])],1),a("v-spacer")],1),a("v-content",[a("router-view")],1)],1)},n=[],r={name:"App",components:{},data:function(){return{}}},l=r,s=(a("cf25"),a("cb8b"),a("2877")),o=a("6544"),c=a.n(o),u=a("7496"),d=a("8336"),m=a("549c"),f=a("132d"),v=a("9910"),p=a("71d9"),b=a("2a7f"),h=Object(s["a"])(l,i,n,!1,null,"4e8e5584",null);t["a"]=h.exports;c()(h,{VApp:u["a"],VBtn:d["a"],VContent:m["a"],VIcon:f["a"],VSpacer:v["a"],VToolbar:p["a"],VToolbarTitle:b["a"]})},"402c":function(e,t,a){"use strict";var i=a("bd86"),n=a("2b0e"),r=a("bb71"),l=(a("da64"),a("aa47")),s=a.n(l);n["a"].use(r["a"],Object(i["a"])({iconfont:"md",lang:{locales:{zhHant:s.a},current:"zhHant"}},"iconfont","fa"))},"41cb":function(e,t,a){"use strict";var i=a("2b0e"),n=a("8c4f"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto mt-4 list_wrap"},[a("v-card-title",{staticClass:"list_title",attrs:{color:"#b8f1ed"}},[a("span",{staticClass:"title font-weight-light"},[e._v("抽獎列表")]),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{color:"#b8f1cc"},on:{click:e.addItem}},[e._v("新增")])],1),a("v-card-title",{staticClass:"list_title",attrs:{color:"#b8f1ed"}},[a("v-text-field",{attrs:{"append-icon":"search",label:"搜尋","single-line":"","hide-details":"",box:"",flat:"",clearable:"",height:"30"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.list,search:e.search,"custom-sort":e.customSort,"custom-filter":e.customFilter,"rows-per-page-items":[10,20,30,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],"disable-initial-sort":"",dark:""},scopedSlots:e._u([{key:"no-data",fn:function(){return[e._v("小編太懶了，沒有留下任何東西")]},proxy:!0},{key:"no-results",fn:function(){return[e._v("唉呀，什麼都沒有呢")]},proxy:!0},{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.value.account))]),a("td",{staticClass:"text-xs-left"},[a("a",{attrs:{href:t.item.value.link,id:"redirect",target:"_blank"}},[a("v-icon",[e._v("link")])],1)]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.value.tagnum))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.value.msg))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.value.duetime))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.value.prizetime))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.value.manager))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.value.isCheck))]),a("td",{staticClass:"text-xs-left"},[t.item.value.isPost?a("span",[e._v(e._s(t.item.value.isPost))]):a("span",{staticStyle:{color:"#ffaacc"}},[e._v(e._s(t.item.value.isPost))])]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.key))]),a("td",{staticClass:"text-xs-left"},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.getItemJson(t.item)}}},[e._v("fas fa-share-alt")])],1)])]}}])}),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",scrollable:"","max-width":"500px",persistent:!0},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",[a("v-toolbar",{attrs:{card:"",color:"modify"==e.editState?"#ff9b6a":"#b8f1cc"}},["add"==e.editState?a("v-toolbar-title",[e._v("新增項目")]):"modify"==e.editState?a("v-toolbar-title",[e._v("編輯項目")]):e._e(),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.cancelEdit}},[a("v-icon",[e._v("close")])],1)],1),a("v-divider"),a("v-card-text",[a("v-form",{ref:"editForm",model:{value:e.editValid,callback:function(t){e.editValid=t},expression:"editValid"}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"抽獎帳號",rules:e.formRules.account,box:"",clearable:""},model:{value:e.editedItem.value.account,callback:function(t){e.$set(e.editedItem.value,"account",t)},expression:"editedItem.value.account"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"*抽獎連結",rules:"add"==e.editState?e.formRules.link:[],required:"",box:"",clearable:""},model:{value:e.editedItem.value.link,callback:function(t){e.$set(e.editedItem.value,"link",t)},expression:"editedItem.value.link"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{items:[0,1,2,3,4,5,6],label:"標記人數",box:""},model:{value:e.editedItem.value.tagnum,callback:function(t){e.$set(e.editedItem.value,"tagnum",t)},expression:"editedItem.value.tagnum"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"留言內容",rules:e.formRules.msg,clearable:"",box:""},model:{value:e.editedItem.value.msg,callback:function(t){e.$set(e.editedItem.value,"msg",t)},expression:"editedItem.value.msg"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:"留言到期日","prepend-inner-icon":"event",readonly:"",box:"",clearable:""},model:{value:e.editedItem.value.duetime,callback:function(t){e.$set(e.editedItem.value,"duetime",t)},expression:"editedItem.value.duetime"}},i))]}}]),model:{value:e.duetimeDateSwitch,callback:function(t){e.duetimeDateSwitch=t},expression:"duetimeDateSwitch"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{input:function(t){e.duetimeDateSwitch=!1}},model:{value:e.editedItem.value.duetime,callback:function(t){e.$set(e.editedItem.value,"duetime",t)},expression:"editedItem.value.duetime"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:"抽獎日","prepend-inner-icon":"event",readonly:"",rules:e.formRules.prizetime,box:"",clearable:""},model:{value:e.editedItem.value.prizetime,callback:function(t){e.$set(e.editedItem.value,"prizetime",t)},expression:"editedItem.value.prizetime"}},i))]}}]),model:{value:e.prizetimeDateSwitch,callback:function(t){e.prizetimeDateSwitch=t},expression:"prizetimeDateSwitch"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{input:function(t){e.prizetimeDateSwitch=!1}},model:{value:e.editedItem.value.prizetime,callback:function(t){e.$set(e.editedItem.value,"prizetime",t)},expression:"editedItem.value.prizetime"}})],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"*登記人帳號",rules:e.formRules.manager,required:"",disabled:"add"!=e.editState,box:"",clearable:""},model:{value:e.editedItem.value.manager,callback:function(t){e.$set(e.editedItem.value,"manager",t)},expression:"editedItem.value.manager"}}),a("v-checkbox",{attrs:{label:"是否記憶登記人帳號",color:"#b8f1cc"},model:{value:e.isRememberManager,callback:function(t){e.isRememberManager=t},expression:"isRememberManager"}})],1),"add"!=e.editState?a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-checkbox",{attrs:{label:"是否已留言",color:"#b8f1cc"},model:{value:e.editedItem.value.isPost,callback:function(t){e.$set(e.editedItem.value,"isPost",t)},expression:"editedItem.value.isPost"}})],1):e._e()],1)],1)],1)],1),a("v-toolbar",{attrs:{card:"",color:"#fff"}},[a("v-btn",{attrs:{color:"#fff"},on:{click:e.cancelEdit}},[e._v("取消")]),a("v-btn",{attrs:{color:"#b8f1cc"},on:{click:e.saveEdit}},[e._v("儲存")])],1)],1)],1),a("p",[e._v(e._s(this.displayJson))])],1)},l=[],s=(a("28a5"),a("6b54"),a("55dd"),a("456d"),a("8615"),a("ac6a"),a("b54a"),{data:function(){var e=this;return{isRememberManager:!1,search:"",list:[],headers:[{text:"抽獎帳號",align:"left",sortable:!0,value:"account"},{text:"抽獎連結",value:"link",sortable:!1},{text:"標記人數",value:"tagnum",sortable:!0},{text:"留言內容",value:"msg",sortable:!1},{text:"留言到期日",value:"duetime",sortable:!0},{text:"抽獎日",value:"prizetime",sortable:!0},{text:"登記人帳號",value:"manager",sortable:!0},{text:"是否上架",value:"isCheck",sortable:!0},{text:"是否已留言",value:"isPost",sortable:!0},{text:"key",value:"key",sortable:!0},{text:"操作",value:"operation",sortable:!1}],duetimeDateSwitch:!1,prizetimeDateSwitch:!1,editValid:!1,editDialog:!1,editState:"add",defaultEditItem:{key:-1,value:{account:"",link:"",tagnum:0,msg:"",duetime:"",prizetime:"",manager:"",isCheck:!0,isPost:!1,createTime:""}},editedItem:{key:-1,value:{account:"",link:"",tagnum:0,msg:"",duetime:"",prizetime:"",manager:"",isCheck:!0,isPost:!1,createTime:""}},formRules:{account:[function(e){return/^[^\u4e00-\u9fa5]*$/.test(e)||"帳號不允許中文"}],link:[function(e){return!!e||"請輸入抽獎連結"},function(e){return e.indexOf("https://www.instagram.com/p/")>-1||"該連結不是ig連結"},function(t){return!t||-1==e.linkArray.indexOf(t)||"該連結已存在於列表中"}],msg:[function(e){return!e||e.indexOf("@@")>-1||"標記人的地方請用 @@ 表示"}],prizetime:[function(t){return!(e.editedItem.value.duetime&&t)||+new Date(t)>=+new Date(e.editedItem.value.duetime)||"抽獎日需在留言到期日之後"}],manager:[function(e){return!!e||"請輸入您的IG帳號"}]},displayJson:""}},computed:{linkArray:function(){var e=this.list.map(function(e){return e.value.link});return e}},watch:{list:function(e){e.forEach(function(e){if(e.value.prizetime){var t=+new Date,a=+new Date("".concat(e.value.prizetime," 00:00"));e.value.isCheck=!(t-a>0)}})},editDialog:function(e){e&&localStorage.getItem("managerRemember")&&(this.isRememberManager=!0,"add"==this.editState&&(this.editedItem.value.manager=localStorage.getItem("managerRemember")))}},mounted:function(){var e=this;appControl.firebase_DB.ref("main_list").on("value",function(t){if(console.log("總列表：",t.val()),t.val()){for(var a=t.val(),i=Object.values(a),n=Object.keys(a),r=new Array,l=0;l<n.length;l++)r.push({key:n[l],value:i[l]});e.list=r}})},methods:{customSort:function(e,t,a){return console.log(t),t?e.sort(function(e,i){return a?i.value[t]-e.value[t]:e.value[t]-i.value[t]}):e.sort(function(e,t){var a=+new Date(e.value.createTime)||0,i=+new Date(t.value.createTime)||0;return i-a}),e},customFilter:function(e,t,a){return t=t.toString().toLowerCase(),e.filter(function(e){return Object.keys(e.value).some(function(i){return a(e.value[i],t)})})},addItem:function(){this.editState="add",this.editDialog=!0,this.editedItem=_cloneDeep(this.defaultEditItem)},editItem:function(e){this.editState="modify",this.editDialog=!0,this.editedItem=_cloneDeep(e)},cancelEdit:function(){this.editDialog=!1},saveEdit:function(){this.list&&this.$refs.editForm.validate()&&(this.isRememberManager?localStorage.setItem("managerRemember",this.editedItem.value.manager):localStorage.removeItem("managerRemember"),"add"==this.editState?(this.editedItem.value.createTime=(new Date).toString(),appControl.firebase_DB.ref("main_list").push(this.editedItem.value)):"modify"==this.editState&&appControl.firebase_DB.ref("main_list/".concat(this.editedItem.key)).update(this.editedItem.value),this.editDialog=!1)},deleteList:function(){appControl.firebase_DB.ref("main_list").remove()},getItemJson:function(e){console.log(e);var t={prizeOwer:[e.value.account],prizeUrl:e.value.link,msgLeave:e.value.msg.split("***"),tagNum:e.value.tagnum};this.displayJson=t,console.log(t)}}}),o=s,c=(a("6eb4"),a("2877")),u=a("6544"),d=a.n(u),m=a("8336"),f=a("b0af"),v=a("99d9"),p=a("12b2"),b=a("ac7c"),h=a("a523"),g=a("8fea"),x=a("2e4b"),_=a("169a"),k=a("ce7e"),I=a("0e8f"),y=a("4bd4"),w=a("132d"),S=a("a722"),D=a("e449"),C=a("b56d"),z=a("9910"),V=a("2677"),O=a("71d9"),P=a("2a7f"),T=Object(c["a"])(o,r,l,!1,null,"ebbd8122",null),j=T.exports;d()(T,{VBtn:m["a"],VCard:f["a"],VCardText:v["a"],VCardTitle:p["a"],VCheckbox:b["a"],VContainer:h["a"],VDataTable:g["a"],VDatePicker:x["a"],VDialog:_["a"],VDivider:k["a"],VFlex:I["a"],VForm:y["a"],VIcon:w["a"],VLayout:S["a"],VMenu:D["a"],VSelect:C["a"],VSpacer:z["a"],VTextField:V["a"],VToolbar:O["a"],VToolbarTitle:P["a"]}),i["a"].use(n["a"]);t["a"]=new n["a"]({routes:[{path:"/",name:"MainList",component:j},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]})},5694:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t),function(e){a("cadf"),a("551c"),a("f751"),a("097d");var t=a("2b0e"),i=a("3dfd"),n=a("41cb"),r=a("8aa5"),l=a.n(r);a("402c"),a("15f5");e._cloneDeep=a("0644"),e._isEqual=a("63ea"),e._isEmpty=a("13ea"),e.appControl={firebase_DB:null};var s={apiKey:"AIzaSyAGY5OL9nqB8yb3DfD-x6MQsuB1jEudzXs",authDomain:"igprize.firebaseapp.com",databaseURL:"https://igprize.firebaseio.com",projectId:"igprize",storageBucket:"igprize.appspot.com",messagingSenderId:"642766889945",appId:"1:642766889945:web:cf117b1e09f6ec3a"};l.a.initializeApp(s),appControl.firebase_DB=l.a.database(),t["a"].config.productionTip=!1,new t["a"]({router:n["a"],render:function(e){return e(i["a"])}}).$mount("#app")}.call(this,a("c8ba"))},"6eb4":function(e,t,a){"use strict";var i=a("b2f5"),n=a.n(i);n.a},b2f5:function(e,t,a){},bb93:function(e,t,a){},cb8b:function(e,t,a){"use strict";var i=a("5694"),n=a.n(i);n.a},cf25:function(e,t,a){"use strict";var i=a("bb93"),n=a.n(i);n.a}});
//# sourceMappingURL=app.08e0b022.js.map